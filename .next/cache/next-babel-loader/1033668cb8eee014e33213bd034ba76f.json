{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Artur\\\\Documents\\\\Programming\\\\ig\\\\relay\\\\www\\\\client\\\\components\\\\Streaming.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { memo, useState, useEffect, useCallback } from 'react';\nimport createEventSource from '../api/streaming/createEventSource';\nexport default memo(({\n  botId,\n  open = true\n}) => {\n  const {\n    0: data,\n    1: setData\n  } = useState(null);\n  const updateData = useCallback(({\n    data\n  }) => setData(data), [botId]);\n  useEffect(() => {\n    if (!open) return;\n    const eventSource = createEventSource(botId);\n    eventSource.addEventListener('message', updateData);\n    console.log(`eventSource.addEventListener('message')`);\n    return () => {\n      eventSource.removeEventListener('message', updateData);\n      eventSource.close();\n      console.log(`eventSource.removeEventListener('message')`);\n    };\n  }, [botId, open]);\n  return open && __jsx(\"img\", {\n    src: `data:image/png;base64,${data}`,\n    style: {\n      objectFit: 'contain',\n      width: '100%',\n      maxHeight: '600px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23\n    },\n    __self: this\n  });\n});","map":{"version":3,"sources":["C:/Users/Artur/Documents/Programming/ig/relay/www/client/components/Streaming.tsx"],"names":["memo","useState","useEffect","useCallback","createEventSource","botId","open","data","setData","updateData","eventSource","addEventListener","console","log","removeEventListener","close","objectFit","width","maxHeight"],"mappings":";;;AAAA,SAASA,IAAT,EAAeC,QAAf,EAAyBC,SAAzB,EAAoCC,WAApC,QAAuD,OAAvD;AACA,OAAOC,iBAAP,MAA8B,oCAA9B;AAEA,eAAeJ,IAAI,CAAC,CAAC;AAAEK,EAAAA,KAAF;AAASC,EAAAA,IAAI,GAAG;AAAhB,CAAD,KAA+D;AACjF,QAAM;AAAA,OAACC,IAAD;AAAA,OAAOC;AAAP,MAAkBP,QAAQ,CAAC,IAAD,CAAhC;AAEA,QAAMQ,UAAU,GAAGN,WAAW,CAAC,CAAC;AAAEI,IAAAA;AAAF,GAAD,KAAcC,OAAO,CAACD,IAAD,CAAtB,EAA8B,CAACF,KAAD,CAA9B,CAA9B;AAEAH,EAAAA,SAAS,CAAC,MAAM;AACd,QAAG,CAACI,IAAJ,EACE;AAEF,UAAMI,WAAW,GAAGN,iBAAiB,CAACC,KAAD,CAArC;AACAK,IAAAA,WAAW,CAACC,gBAAZ,CAA6B,SAA7B,EAAwCF,UAAxC;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAa,yCAAb;AACA,WAAO,MAAM;AACXH,MAAAA,WAAW,CAACI,mBAAZ,CAAgC,SAAhC,EAA2CL,UAA3C;AACAC,MAAAA,WAAW,CAACK,KAAZ;AACAH,MAAAA,OAAO,CAACC,GAAR,CAAa,4CAAb;AACD,KAJD;AAKD,GAZQ,EAYN,CAACR,KAAD,EAAQC,IAAR,CAZM,CAAT;AAcA,SAAOA,IAAI,IAAI;AAAK,IAAA,GAAG,EAAG,yBAAwBC,IAAK,EAAxC;AAA2C,IAAA,KAAK,EAAE;AAAES,MAAAA,SAAS,EAAE,SAAb;AAAwBC,MAAAA,KAAK,EAAE,MAA/B;AAAuCC,MAAAA,SAAS,EAAE;AAAlD,KAAlD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAf;AACD,CApBkB,CAAnB","sourcesContent":["import { memo, useState, useEffect, useCallback } from 'react'\r\nimport createEventSource from '../api/streaming/createEventSource'\r\n\r\nexport default memo(({ botId, open = true }: { botId: string, open?: boolean }) => {\r\n  const [data, setData] = useState(null)\r\n\r\n  const updateData = useCallback(({ data }) => setData(data), [botId])\r\n\r\n  useEffect(() => {\r\n    if(!open)\r\n      return\r\n    \r\n    const eventSource = createEventSource(botId)\r\n    eventSource.addEventListener('message', updateData)\r\n    console.log(`eventSource.addEventListener('message')`)\r\n    return () => {\r\n      eventSource.removeEventListener('message', updateData)\r\n      eventSource.close()\r\n      console.log(`eventSource.removeEventListener('message')`)\r\n    }\r\n  }, [botId, open])\r\n\r\n  return open && <img src={`data:image/png;base64,${data}`} style={{ objectFit: 'contain', width: '100%', maxHeight: '600px' }} />\r\n})"]},"metadata":{},"sourceType":"module"}