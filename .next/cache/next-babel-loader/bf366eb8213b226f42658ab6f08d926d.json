{"ast":null,"code":"import nextCookie from 'next-cookies';\nimport fetch from 'isomorphic-unfetch';\nimport getServerHost from '../getServerHost';\nexport default (async ctx => {\n  const {\n    token\n  } = nextCookie(ctx);\n  const apiUrl = getServerHost(ctx.req) + '/accounts';\n\n  try {\n    const response = await fetch(apiUrl, {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    });\n\n    if (response.ok) {\n      const accounts = await response.json();\n      return accounts;\n    } else {\n      return null;\n    }\n  } catch (error) {\n    console.warn(error);\n    return null;\n  }\n});","map":{"version":3,"sources":["C:/Users/Artur/Documents/Programming/ig/relay/www/client/utils/api/getAccounts.tsx"],"names":["nextCookie","fetch","getServerHost","ctx","token","apiUrl","req","response","headers","Authorization","ok","accounts","json","error","console","warn"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,cAAvB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,OAAOC,aAAP,MAA0B,kBAA1B;AAGA,gBAAe,MAAOC,GAAP,IAAe;AAC5B,QAAM;AAAEC,IAAAA;AAAF,MAAYJ,UAAU,CAACG,GAAD,CAA5B;AACA,QAAME,MAAM,GAAGH,aAAa,CAACC,GAAG,CAACG,GAAL,CAAb,GAAyB,WAAxC;;AAEA,MAAI;AACF,UAAMC,QAAQ,GAAG,MAAMN,KAAK,CAACI,MAAD,EAAS;AAAEG,MAAAA,OAAO,EAAE;AAAEC,QAAAA,aAAa,EAAG,UAASL,KAAM;AAAjC;AAAX,KAAT,CAA5B;;AACA,QAAGG,QAAQ,CAACG,EAAZ,EAAe;AACb,YAAMC,QAAmB,GAAG,MAAMJ,QAAQ,CAACK,IAAT,EAAlC;AACA,aAAOD,QAAP;AACD,KAHD,MAGO;AACL,aAAO,IAAP;AACD;AACF,GARD,CAQE,OAAOE,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACC,IAAR,CAAaF,KAAb;AACA,WAAO,IAAP;AACD;AACF,CAhBD","sourcesContent":["import nextCookie from 'next-cookies'\r\nimport fetch from 'isomorphic-unfetch'\r\nimport getServerHost from '../getServerHost'\r\nimport {Account} from '../../types/Account'\r\n\r\nexport default async (ctx) => {\r\n  const { token } = nextCookie(ctx)\r\n  const apiUrl = getServerHost(ctx.req) + '/accounts'\r\n\r\n  try {\r\n    const response = await fetch(apiUrl, { headers: { Authorization: `Bearer ${token}` } })\r\n    if(response.ok){\r\n      const accounts: Account[] = await response.json()\r\n      return accounts\r\n    } else {\r\n      return null\r\n    }\r\n  } catch (error) {\r\n    console.warn(error)\r\n    return null\r\n  }\r\n}"]},"metadata":{},"sourceType":"module"}